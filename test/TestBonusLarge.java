import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertTrue;

import java.util.List;

import org.junit.jupiter.api.Order;
import org.junit.jupiter.api.Test;

public class TestBonusLarge {

	
	@Test
	@Order(1)
	void testLargeBonus() {
		String customerConfig  = "ISSPPIIIAPIAPAIPIIIPIASIISIASSIAPAAPPIPIPP"
				+ "IISSSPSAPSAPIAAAIAPAIISAASSIASAAASPISSSAPASISSIAISPIISIS"
				+ "PPSIPAIISAPSAIISPISASIAPAAAIAIAIIPIPPSAPPASIPPIPIAPPAIPA"
				+ "SIPPPAPAPSAPIPPAIAPSIASSPSAASIAAISSSIAASSIASPA";
		String customerPayment = "CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC"
				+ "CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC"
				+ "MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM"
				+ "MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM";
		String[][] foodStallConfig = {
				{"Bamboo Shop", "NDMSB"}
				,{"N Only", "N"}
				,{"Dessert Only", "D"}
				,{"M&S&B Only", "MSB"}
				,{"N&D&B Only", "NDB"}
				,{"N&M&S&B Only", "NMSB"}
				,{"D&M&S&B Only", "DMSB"}
		};
	
		CanteenICT canteen = new CanteenICT("bonus3");

		canteen.setCustomers(customerConfig, customerPayment);
		canteen.setFoodStalls(foodStallConfig);
		canteen.setTables(5);
		
		/*
		 * <timer> <# customers waiting to enter> <# customers waiting in food stallsâ€™ queues> 
		 *	<# customers waiting to be seated> <# of customers sitting at tables> 
		 *	<# done customers>
		 */

		int[][] expected = {
				{0,200,0,0,0,0},
				{1,199,1,0,0,0},
				{2,198,2,0,0,0},
				{3,197,3,0,0,0},
				{4,196,4,0,0,0},
				{5,195,5,0,0,0},
				{6,194,6,0,0,0},
				{7,193,7,0,0,0},
				{8,192,8,0,0,0},
				{9,191,9,0,0,0},
				{10,190,10,0,0,0},
				{11,189,10,1,0,0},
				{12,188,9,2,1,0},
				{13,187,9,2,2,0},
				{14,186,10,1,3,0},
				{15,185,11,0,4,0},
				{16,184,11,1,4,0},
				{17,183,12,0,5,0},
				{18,182,13,0,5,0},
				{19,181,13,1,5,0},
				{20,180,13,1,6,0},
				{21,179,14,0,7,0},
				{22,178,14,1,7,0},
				{23,177,14,1,7,1},
				{24,176,15,0,8,1},
				{25,175,16,0,8,1},
				{26,174,15,2,8,1},
				{27,173,16,1,9,1},
				{28,172,16,1,10,1},
				{29,171,17,0,10,2},
				{30,170,18,0,9,3},
				{31,169,18,1,9,3},
				{32,168,18,1,10,3},
				{33,167,19,0,11,3},
				{34,166,20,0,11,3},
				{35,165,21,0,11,3},
				{36,164,20,2,11,3},
				{37,163,21,1,12,3},
				{38,162,22,0,11,5},
				{39,161,23,0,10,6},
				{40,160,24,0,10,6},
				{41,159,24,1,8,8},
				{42,158,24,1,9,8},
				{43,157,24,1,9,9},
				{44,156,25,0,10,9},
				{45,155,25,1,10,9},
				{46,154,24,2,11,9},
				{47,153,25,1,12,9},
				{48,152,26,0,13,9},
				{49,151,27,0,12,10},
				{50,150,28,0,11,11},
				{51,149,28,1,11,11},
				{52,148,28,1,12,11},
				{53,147,29,0,12,12},
				{54,147,28,1,12,12},
				{55,146,29,0,13,12},
				{56,145,29,1,13,12},
				{57,144,30,0,14,12},
				{58,144,30,0,14,12},
				{59,144,30,0,13,13},
				{60,144,29,1,13,13},
				{61,143,29,1,14,13},
				{62,143,27,2,15,13},
				{63,142,28,1,15,14},
				{64,141,28,1,15,15},
				{65,140,29,0,15,16},
				{66,139,29,1,15,16},
				{67,138,30,0,16,16},
				{68,138,30,0,15,17},
				{69,138,29,1,14,18},
				{70,137,29,1,15,18},
				{71,137,29,0,16,18},
				{72,137,27,2,16,18},
				{73,136,28,1,15,20},
				{74,135,29,0,16,20},
				{75,134,30,0,15,21},
				{76,134,29,1,15,21},
				{77,133,28,2,16,21},
				{78,132,28,2,16,22},
				{79,132,28,1,15,24},
				{80,132,27,1,15,25},
				{81,131,28,0,16,25},
				{82,131,27,1,14,27},
				{83,130,28,0,14,28},
				{84,129,29,0,13,29},
				{85,129,29,0,13,29},
				{86,129,27,2,13,29},
				{87,128,27,2,14,29},
				{88,127,28,1,13,31},
				{89,126,29,0,12,33},
				{90,126,28,1,11,34},
				{91,125,29,0,11,35},
				{92,124,29,1,11,35},
				{93,124,29,0,11,36},
				{94,124,27,2,11,36},
				{95,123,28,1,12,36},
				{96,122,28,1,13,36},
				{97,121,28,1,13,37},
				{98,120,28,1,14,37},
				{99,119,29,0,13,39},
				{100,118,30,0,13,39},
				{101,118,30,0,13,39},
				{102,118,29,1,12,40},
				{103,118,29,0,12,41},
				{104,118,29,0,12,41},
				{105,118,28,1,11,42},
				{106,117,29,0,12,42},
				{107,117,29,0,12,42},
				{108,117,29,0,11,43},
				{109,117,29,0,10,44},
				{110,117,29,0,10,44},
				{111,117,27,2,10,44},
				{112,116,27,2,11,44},
				{113,115,27,2,11,45},
				{114,114,28,1,12,45},
				{115,113,27,2,11,47},
				{116,112,28,1,11,48},
				{117,111,29,0,11,49},
				{118,110,30,0,11,49},
				{119,110,30,0,10,50},
				{120,110,30,0,10,50},
				{121,110,30,0,10,50},
				{122,110,29,1,10,50},
				{123,109,30,0,10,51},
				{124,109,30,0,9,52},
				{125,109,28,2,9,52},
				{126,108,29,1,10,52},
				{127,107,30,0,11,52},
				{128,107,28,2,11,52},
				{129,107,28,1,11,53},
				{130,107,27,1,12,53},
				{131,106,28,0,13,53},
				{132,106,27,1,13,53},
				{133,105,28,0,13,54},
				{134,105,28,0,13,54},
				{135,105,26,2,13,54},
				{136,104,27,1,14,54},
				{137,103,28,0,15,54},
				{138,103,28,0,15,54},
				{139,103,28,0,14,55},
				{140,103,28,0,14,55},
				{141,103,28,0,14,55},
				{142,103,27,1,13,56},
				{143,102,28,0,14,56},
				{144,101,29,0,14,56},
				{145,101,26,3,14,56},
				{146,100,27,2,15,56},
				{147,100,26,2,16,56},
				{148,99,27,1,17,56},
				{149,99,27,0,17,57},
				{150,99,27,0,16,58},
				{151,99,27,0,15,59},
				{152,99,25,2,14,60},
				{153,98,25,2,13,62},
				{154,97,26,1,13,63},
				{155,96,27,0,14,63},
				{156,95,28,0,14,63},
				{157,95,27,1,14,63},
				{158,94,28,0,15,63},
				{159,94,28,0,14,64},
				{160,94,28,0,14,64},
				{161,94,28,0,14,64},
				{162,94,24,4,13,65},
				{163,93,24,4,13,66},
				{164,92,25,3,13,67},
				{165,91,26,2,14,67},
				{166,90,27,1,15,67},
				{167,89,27,1,15,68},
				{168,88,28,0,15,69},
				{169,87,29,0,13,71},
				{170,87,28,1,13,71},
				{171,87,27,1,14,71},
				{172,86,26,2,15,71},
				{173,85,27,1,16,71},
				{174,84,28,0,16,72},
				{175,83,29,0,16,72},
				{176,82,30,0,16,72},
				{177,82,29,1,16,72},
				{178,81,30,0,17,72},
				{179,81,29,1,17,72},
				{180,81,29,0,16,74},
				{181,81,28,1,15,75},
				{182,80,27,2,16,75},
				{183,79,28,1,17,75},
				{184,79,28,0,16,77},
				{185,79,28,0,15,78},
				{186,79,28,0,15,78},
				{187,79,26,2,14,79},
				{188,78,26,2,15,79},
				{189,77,27,1,15,80},
				{190,76,28,0,15,81},
				{191,76,28,0,13,83},
				{192,76,26,2,13,83},
				{193,75,27,1,14,83},
				{194,74,27,1,14,84},
				{195,73,27,1,15,84},
				{196,72,26,2,16,84},
				{197,71,27,1,17,84},
				{198,70,28,0,18,84},
				{199,69,29,0,15,87},
				{200,69,29,0,15,87},
				{201,69,26,3,14,88},
				{202,68,27,2,14,89},
				{203,67,28,1,15,89},
				{204,66,28,1,14,91},
				{205,65,28,1,14,92},
				{206,64,29,0,15,92},
				{207,63,30,0,15,92},
				{208,63,29,1,14,93},
				{209,62,30,0,13,95},
				{210,62,28,2,13,95},
				{211,61,29,1,14,95},
				{212,61,28,1,15,95},
				{213,60,28,1,15,96},
				{214,59,28,1,15,97},
				{215,58,29,0,16,97},
				{216,58,29,0,16,97},
				{217,58,29,0,16,97},
				{218,58,29,0,14,99},
				{219,58,27,2,13,100},
				{220,57,28,1,13,101},
				{221,57,28,0,14,101},
				{222,57,27,1,14,101},
				{223,56,27,1,15,101},
				{224,55,27,1,15,102},
				{225,54,28,0,16,102},
				{226,53,29,0,15,103},
				{227,52,30,0,15,103},
				{228,52,28,2,13,105},
				{229,52,28,1,14,105},
				{230,52,28,0,15,105},
				{231,52,26,2,14,106},
				{232,51,27,1,14,107},
				{233,50,28,0,15,107},
				{234,49,29,0,15,107},
				{235,48,29,1,14,108},
				{236,47,30,0,15,108},
				{237,47,29,1,14,109},
				{238,47,29,0,14,110},
				{239,47,28,1,14,110},
				{240,46,28,1,14,111},
				{241,45,29,0,13,113},
				{242,44,30,0,13,113},
				{243,44,30,0,13,113},
				{244,44,29,1,13,113},
				{245,44,29,0,14,113},
				{246,44,28,1,13,114},
				{247,44,26,2,13,115},
				{248,43,26,2,14,115},
				{249,42,27,1,14,116},
				{250,42,27,0,14,117},
				{251,42,26,1,13,118},
				{252,41,27,0,14,118},
				{253,40,28,0,14,118},
				{254,40,27,1,14,118},
				{255,39,27,1,14,119},
				{256,38,27,1,15,119},
				{257,37,28,0,16,119},
				{258,36,28,1,14,121},
				{259,35,29,0,15,121},
				{260,35,28,1,15,121},
				{261,35,27,1,16,121},
				{262,34,28,0,17,121},
				{263,33,28,1,16,122},
				{264,32,27,2,15,124},
				{265,32,26,2,16,124},
				{266,31,27,1,17,124},
				{267,30,28,0,16,126},
				{268,29,28,1,15,127},
				{269,28,29,0,16,127},
				{270,28,28,1,16,127},
				{271,27,29,0,16,128},
				{272,26,29,1,16,128},
				{273,25,28,2,15,130},
				{274,24,29,1,15,131},
				{275,23,29,1,16,131},
				{276,23,28,1,15,133},
				{277,23,28,0,16,133},
				{278,23,28,0,14,135},
				{279,23,26,2,14,135},
				{280,22,27,1,14,136},
				{281,21,28,0,15,136},
				{282,21,26,2,13,138},
				{283,20,27,1,12,140},
				{284,19,28,0,13,140},
				{285,18,29,0,12,141},
				{286,18,27,2,11,142},
				{287,17,28,1,12,142},
				{288,16,29,0,13,142},
				{289,15,28,2,12,143},
				{290,14,29,1,12,144},
				{291,13,29,1,12,145},
				{292,12,29,1,13,145},
				{293,12,28,1,13,146},
				{294,11,29,0,14,146},
				{295,11,29,0,14,146},
				{296,11,28,1,13,147},
				{297,11,28,0,13,148},
				{298,11,28,0,13,148},
				{299,11,28,0,12,149},
				{300,11,26,2,9,152},
				{301,10,27,1,10,152},
				{302,9,27,1,11,152},
				{303,8,28,0,10,154},
				{304,7,29,0,10,154},
				{305,7,28,1,10,154},
				{306,6,29,0,9,156},
				{307,6,28,1,9,156},
				{308,5,28,1,10,156},
				{309,5,26,2,10,157},
				{310,4,27,1,11,157},
				{311,3,28,0,11,158},
				{312,2,28,1,11,158},
				{313,1,29,0,12,158},
				{314,0,29,1,12,158},
				{315,0,29,0,12,159},
				{316,0,29,0,12,159},
				{317,0,29,0,11,160},
				{318,0,27,2,10,161},
				{319,0,27,1,10,162},
				{320,0,27,0,11,162},
				{321,0,26,1,11,162},
				{322,0,26,0,12,162},
				{323,0,25,1,12,162},
				{324,0,24,1,12,163},
				{325,0,24,0,13,163},
				{326,0,24,0,13,163},
				{327,0,22,2,12,164},
				{328,0,21,2,12,165},
				{329,0,21,1,13,165},
				{330,0,20,1,14,165},
				{331,0,20,0,14,166},
				{332,0,19,1,14,166},
				{333,0,19,0,15,166},
				{334,0,19,0,15,166},
				{335,0,19,0,15,166},
				{336,0,17,2,14,167},
				{337,0,17,1,15,167},
				{338,0,17,0,16,167},
				{339,0,17,0,16,167},
				{340,0,16,1,16,167},
				{341,0,15,1,16,168},
				{342,0,15,0,17,168},
				{343,0,15,0,17,168},
				{344,0,14,1,16,169},
				{345,0,13,1,16,170},
				{346,0,12,1,16,171},
				{347,0,12,0,16,172},
				{348,0,12,0,16,172},
				{349,0,12,0,16,172},
				{350,0,11,1,15,173},
				{351,0,11,0,15,174},
				{352,0,10,1,15,174},
				{353,0,10,0,16,174},
				{354,0,9,1,15,175},
				{355,0,8,1,15,176},
				{356,0,7,1,16,176},
				{357,0,7,0,16,177},
				{358,0,7,0,16,177},
				{359,0,7,0,15,178},
				{360,0,6,1,14,179},
				{361,0,5,1,15,179},
				{362,0,5,0,16,179},
				{363,0,5,0,14,181},
				{364,0,4,1,13,182},
				{365,0,4,0,14,182},
				{366,0,4,0,14,182},
				{367,0,3,1,14,182},
				{368,0,3,0,13,184},
				{369,0,3,0,13,184},
				{370,0,3,0,13,184},
				{371,0,3,0,13,184},
				{372,0,2,1,12,185},
				{373,0,2,0,13,185},
				{374,0,2,0,13,185},
				{375,0,2,0,13,185},
				{376,0,2,0,13,185},
				{377,0,2,0,11,187},
				{378,0,2,0,11,187},
				{379,0,2,0,10,188},
				{380,0,2,0,10,188},
				{381,0,2,0,9,189},
				{382,0,2,0,8,190},
				{383,0,1,1,7,191},
				{384,0,1,0,8,191},
				{385,0,1,0,7,192},
				{386,0,1,0,7,192},
				{387,0,1,0,7,192},
				{388,0,0,1,6,193},
				{389,0,0,0,7,193},
				{390,0,0,0,7,193},
				{391,0,0,0,5,195},
				{392,0,0,0,5,195},
				{393,0,0,0,5,195},
				{394,0,0,0,5,195},
				{395,0,0,0,4,196},
				{396,0,0,0,4,196},
				{397,0,0,0,4,196},
				{398,0,0,0,4,196},
				{399,0,0,0,3,197},
				{400,0,0,0,3,197},
				{401,0,0,0,3,197},
				{402,0,0,0,3,197},
				{403,0,0,0,3,197},
				{404,0,0,0,3,197},
				{405,0,0,0,3,197},
				{406,0,0,0,3,197},
				{407,0,0,0,3,197},
				{408,0,0,0,3,197},
				{409,0,0,0,3,197},
				{410,0,0,0,3,197},
				{411,0,0,0,2,198},
				{412,0,0,0,2,198},
				{413,0,0,0,2,198},
				{414,0,0,0,2,198},
				{415,0,0,0,2,198},
				{416,0,0,0,2,198},
				{417,0,0,0,2,198},
				{418,0,0,0,2,198},
				{419,0,0,0,2,198},
				{420,0,0,0,2,198},
				{421,0,0,0,2,198},
				{422,0,0,0,1,199},
				{423,0,0,0,1,199},
				{424,0,0,0,1,199},
				{425,0,0,0,1,199},
				{426,0,0,0,1,199},
				{427,0,0,0,0,200},

		};

		// start simulation
		canteen.simulate();
		List<Integer[]> log = canteen.getLogState();
		assertTrue(canteen.isFinished(), "must be finished");
		assertEquals(expected.length, log.size(), "must finish when T=427");
		
		// Testing value in each time step
		for(int i = 0; i < expected.length; i++) {
			assertEquals(expected[i][1], log.get(i)[1], 
					"T="+ i + ", waiting to enter queue");
			assertEquals(expected[i][2], log.get(i)[2], 
					"T="+ i + ", customer queue");
			assertEquals(expected[i][3], log.get(i)[3],
					"T="+ i + ", waiting to seat queue");
			assertEquals(expected[i][4], log.get(i)[4],
					"T="+ i + ", seated customer");
			assertEquals(expected[i][5], log.get(i)[5],
					"T="+ i + ", done queue");
		}

	}
}
